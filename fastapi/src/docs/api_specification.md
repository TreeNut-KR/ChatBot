# π“ ChatBot FastAPI λ…μ„Έμ„

## π“Ά κ°μ”
- **API μ΄λ¦„**: ChatBot FastAPI
- **μ„¤λ…**: μ³‡λ΄‡ λ°μ΄ν„° κ΄€λ¦¬ λ° μ΄λ©”μΌ μΈμ¦ API
- **λ²„μ „**: 
- **λ΅κ³ **: 
  ![ChatBot λ΅κ³ ](https://drive.google.com/thumbnail?id=12PqUS6bj4eAO_fLDaWQmoq94-771xfim)

μ΄ APIλ” MongoDB λ°μ΄ν„° κ΄€λ¦¬μ™€ μ΄λ©”μΌ μΈμ¦μ„ μ„ν• κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.

---

## π“ μ—”λ“ν¬μΈνΈ λ©λ΅

### π”Ή MongoDB λΌμ°ν„°

#### π“ λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ¦¬
- **`GET /mongo/db`**
  - **μ„¤λ…**: λ°μ΄ν„°λ² μ΄μ¤ μ„λ²„μ— μλ” λ¨λ“  λ°μ΄ν„°λ² μ΄μ¤μ λ©λ΅μ„ λ°ν™ν•©λ‹λ‹¤.
  - **μ‘λ‹µ**: λ°μ΄ν„°λ² μ΄μ¤ λ©λ΅ λ° κ΄€λ ¨ λ§ν¬λ¥Ό ν¬ν•¨ν• JSON κ°μ²΄

- **`GET /mongo/collections`**
  - **μ„¤λ…**: ν„μ¬ μ„ νƒλ λ°μ΄ν„°λ² μ΄μ¤ λ‚΄μ λ¨λ“  μ»¬λ ‰μ… μ΄λ¦„μ„ λ°ν™ν•©λ‹λ‹¤.
  - **μΏΌλ¦¬ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ… | ν•„μ μ—¬λ¶€ | μ„¤λ… |
    |-----------|---------|------|
    | db_name   | ν•„μ    | λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„ |
  - **μ‘λ‹µ**: μ»¬λ ‰μ… λ©λ΅ λ° κ΄€λ ¨ λ§ν¬λ¥Ό ν¬ν•¨ν• JSON κ°μ²΄

---

### π”Ή MongoDB / Offices

#### π“ μ¤ν”Όμ¤ μ±„ν…λ°© κ΄€λ¦¬
- **`POST /mongo/offices/users/{user_id}`**
  - **μ„¤λ…**: μƒλ΅μ΄ μ μ € μ±„ν… λ¬Έμ„(μ±„ν… λ΅κ·Έ)λ¥Ό MongoDBμ— μƒμ„±ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ… | νƒ€μ…   | μ„¤λ…     |
    |-----------|-------|---------|
    | user_id   | string | μ μ € ID |
  - **μ‘λ‹µ**: μƒμ„±λ μ±„ν…λ°© ID λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`GET /mongo/offices/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: μƒμ„±λ μ±„ν… λ¬Έμ„μ μ±„ν… λ΅κ·Έλ¥Ό MongoDBμ—μ„ λ¶λ¬μµλ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ‘λ‹µ**: μ±„ν… λ΅κ·Έ λ‚΄μ© λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`PUT /mongo/offices/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: μƒμ„±λ μ±„ν… λ¬Έμ„μ— μ μ €μ μ±„ν… λ°μ΄ν„°λ¥Ό μ €μ¥ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ”μ²­ λ³Έλ¬Έ**:
    ```json
    {
      "input_data": "μ•λ…•ν•μ„Έμ”, μ±—λ΄‡!",
      "output_data": "μ•λ…•ν•μ„Έμ”! λ¬΄μ—‡μ„ λ„μ™€λ“λ¦΄κΉμ”?"
    }
    ```
    | ν•„λ“λ…      | νƒ€μ…   | μ μ•½μ΅°κ±΄                  | μ„¤λ…                     | μμ‹                           |
    |------------|-------|--------------------------|--------------------------|--------------------------------|
    | input_data  | string | minLength=1, maxLength=500 | μ‚¬μ©μ μ…λ ¥ λ¬Έμ¥           | `"μ•λ…•ν•μ„Έμ”, μ±—λ΄‡!"`           |
    | output_data | string | minLength=1, maxLength=8191 | μ±—λ΄‡ μ¶λ ¥ λ¬Έμ¥            | `"μ•λ…•ν•μ„Έμ”! λ¬΄μ—‡μ„ λ„μ™€λ“λ¦΄κΉμ”?"` |
  - **μ‘λ‹µ**: μ €μ¥ κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`PATCH /mongo/offices/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: κΈ°μ΅΄ μ±„ν… λ¬Έμ„μ— μ μ €μ μ±„ν… λ°μ΄ν„°λ¥Ό μμ •ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ”μ²­ λ³Έλ¬Έ**: `PUT` μ”μ²­κ³Ό λ™μΌν• ν•μ‹
  - **μ‘λ‹µ**: μμ • κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`DELETE /mongo/offices/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: μ μ €μ μ±„ν…λ°©μ„ μ‚­μ ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ‘λ‹µ**: μ‚­μ  κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`DELETE /mongo/offices/users/{user_id}/documents/{document_id}/idx/{index}`**
  - **μ„¤λ…**: μµμ‹  λ€ν™” ~ μ„ νƒλ μ±„ν…μ„ λ΅κ·Έμ—μ„ μ‚­μ ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…    | μ„¤λ…                          |
    |-------------|--------|------------------------------|
    | user_id     | string  | μ μ € ID                       |
    | document_id | string  | μ±„ν…λ°© ID                     |
    | index       | integer | μ‚­μ λ¥Ό μ‹μ‘ν•  μ±„ν… λ΅κ·Έμ μΈλ±μ¤ |
  - **μ‘λ‹µ**: μ‚­μ  κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

---

### π”Ή MongoDB / Characters

#### π“ μΊλ¦­ν„° μ±„ν…λ°© κ΄€λ¦¬
- **`POST /mongo/characters/users/{user_id}`**
  - **μ„¤λ…**: μƒλ΅μ΄ μ μ € μ±„ν… λ¬Έμ„(μ±„ν… λ΅κ·Έ)λ¥Ό MongoDBμ— μƒμ„±ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ… | νƒ€μ…   | μ„¤λ…     |
    |-----------|-------|---------|
    | user_id   | string | μ μ € ID |
  - **μ”μ²­ λ³Έλ¬Έ**:
    ```json
    {
      "character_idx": 1
    }
    ```
    | ν•„λ“λ…        | νƒ€μ…    | μ„¤λ…         | μμ‹  |
    |--------------|--------|-------------|-------|
    | character_idx | integer | μΊλ¦­ν„° id    | `1`   |
  - **μ‘λ‹µ**: μƒμ„±λ μ±„ν…λ°© ID λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`GET /mongo/characters/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: μƒμ„±λ μ±„ν… λ¬Έμ„μ μ±„ν… λ΅κ·Έλ¥Ό MongoDBμ—μ„ λ¶λ¬μµλ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ‘λ‹µ**: μ±„ν… λ΅κ·Έ λ‚΄μ©, μΊλ¦­ν„° μΈλ±μ¤ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`PUT /mongo/characters/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: μƒμ„±λ μ±„ν… λ¬Έμ„μ— μ μ €μ μ±„ν… λ°μ΄ν„°λ¥Ό μ €μ¥ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ”μ²­ λ³Έλ¬Έ**:
    ```json
    {
      "img_url": "https://drive.google.com/thumbnail?id=12PqUS6bj4eAO_fLDaWQmoq94-771xfim",
      "input_data": "μ•λ…•ν•μ„Έμ”, μ±—λ΄‡!",
      "output_data": "μ•λ…•ν•μ„Έμ”! λ¬΄μ—‡μ„ λ„μ™€λ“λ¦΄κΉμ”?"
    }
    ```
    | ν•„λ“λ…      | νƒ€μ…   | μ μ•½μ΅°κ±΄                  | μ„¤λ…                     | μμ‹                           |
    |------------|-------|--------------------------|--------------------------|--------------------------------|
    | img_url     | string | minLength=1, maxLength=2048 | μ΄λ―Έμ§€ URL              | `"https://drive.google.com/thumbnail?id=12PqUS6bj4eAO_fLDaWQmoq94-771xfim"` |
    | input_data  | string | minLength=1, maxLength=500 | μ‚¬μ©μ μ…λ ¥ λ¬Έμ¥           | `"μ•λ…•ν•μ„Έμ”, μ±—λ΄‡!"`           |
    | output_data | string | minLength=1, maxLength=8191 | μ±—λ΄‡ μ¶λ ¥ λ¬Έμ¥            | `"μ•λ…•ν•μ„Έμ”! λ¬΄μ—‡μ„ λ„μ™€λ“λ¦΄κΉμ”?"` |
  - **μ‘λ‹µ**: μ €μ¥ κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`PATCH /mongo/characters/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: κΈ°μ΅΄ μ±„ν… λ¬Έμ„μ— μ μ €μ μ±„ν… λ°μ΄ν„°λ¥Ό μμ •ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ”μ²­ λ³Έλ¬Έ**: `PUT` μ”μ²­κ³Ό λ™μΌν• ν•μ‹
  - **μ‘λ‹µ**: μμ • κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`DELETE /mongo/characters/users/{user_id}/documents/{document_id}`**
  - **μ„¤λ…**: μ μ €μ μ±„ν…λ°©μ„ μ‚­μ ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…   | μ„¤λ…      |
    |-------------|-------|----------|
    | user_id     | string | μ μ € ID   |
    | document_id | string | μ±„ν…λ°© ID |
  - **μ‘λ‹µ**: μ‚­μ  κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

- **`DELETE /mongo/characters/users/{user_id}/documents/{document_id}/idx/{index}`**
  - **μ„¤λ…**: μµμ‹  λ€ν™” ~ μ„ νƒλ μ±„ν…μ„ λ΅κ·Έμ—μ„ μ‚­μ ν•©λ‹λ‹¤.
  - **κ²½λ΅ νλΌλ―Έν„°**:
    | νλΌλ―Έν„°λ…   | νƒ€μ…    | μ„¤λ…                          |
    |-------------|--------|------------------------------|
    | user_id     | string  | μ μ € ID                       |
    | document_id | string  | μ±„ν…λ°© ID                     |
    | index       | integer | μ‚­μ λ¥Ό μ‹μ‘ν•  μ±„ν… λ΅κ·Έμ μΈλ±μ¤ |
  - **μ‘λ‹µ**: μ‚­μ  κ²°κ³Ό λ©”μ‹μ§€ λ° κ΄€λ ¨ API λ§ν¬ μ •λ³΄

---

### π”Ή μΈμ¦

#### π“ μ΄λ©”μΌ μΈμ¦
- **`POST /auth/verification/send`**
  - **μ„¤λ…**: μ‚¬μ©μ μ΄λ©”μΌλ΅ μΈμ¦ μ½”λ“λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.
  - **μ”μ²­ λ³Έλ¬Έ**:
    ```json
    {
      "user_id": "shaa97102",
      "email": "user@example.com"
    }
    ```
    | ν•„λ“λ…  | νƒ€μ…   | μ μ•½μ΅°κ±΄                | μ„¤λ…                          | μμ‹                |
    |--------|-------|--------------------------|-------------------------------|---------------------|
    | user_id | string | minLength=1, maxLength=50 | μ μ € ID                      | `"shaa97102"`        |
    | email   | string | μ ν¨ν• μ΄λ©”μΌ ν•μ‹        | μΈμ¦ μ½”λ“λ¥Ό μ „μ†΅ν•  μ΄λ©”μΌ μ£Όμ† | `"user@example.com"` |
  - **μ‘λ‹µ**: μΈμ¦ μ½”λ“ μ „μ†΅ κ²°κ³Ό λ©”μ‹μ§€

- **`POST /auth/verification/verify`**
  - **μ„¤λ…**: μ‚¬μ©μλ΅λ¶€ν„° λ°›μ€ μΈμ¦ μ½”λ“λ¥Ό κ²€μ¦ν•©λ‹λ‹¤.
  - **μ”μ²­ λ³Έλ¬Έ**:
    ```json
    {
      "user_id": "shaa97102",
      "email": "user@example.com",
      "code": "A12B34"
    }
    ```
    | ν•„λ“λ…  | νƒ€μ…   | μ μ•½μ΅°κ±΄                | μ„¤λ…                          | μμ‹                |
    |--------|-------|--------------------------|-------------------------------|---------------------|
    | user_id | string | minLength=1, maxLength=50 | μ μ € ID                      | `"shaa97102"`        |
    | email   | string | μ ν¨ν• μ΄λ©”μΌ ν•μ‹        | μΈμ¦ μ½”λ“λ¥Ό μ „μ†΅ν• μ΄λ©”μΌ μ£Όμ† | `"user@example.com"` |
    | code    | string | minLength=6, maxLength=6  | 6μλ¦¬ μΈμ¦ μ½”λ“              | `"A12B34"`           |
  - **μ‘λ‹µ**: μΈμ¦ μ½”λ“ κ²€μ¦ κ²°κ³Ό λ©”μ‹μ§€

---

## π›  μ‘λ‹µ κµ¬μ΅°

### μΌλ° μ‘λ‹µ
- **μ •μƒ μ‘λ‹µ μμ‹**: 
  ```json
  {
    "status": "success",
    "message": "μΈμ¦ μ½”λ“κ°€ μ „μ†΅λμ—μµλ‹λ‹¤. μ΄λ©”μΌμ„ ν™•μΈν•΄μ£Όμ„Έμ”."
  }
  ```

### HATEOAS λ§ν¬
- **λ§ν¬ ν¬ν•¨ μ‘λ‹µ μμ‹**: 
  ```json
  {
    "Document ID": "614a123456789b0d323e456f",
    "_links": [
      {
        "href": "/mongo/offices/users/shaa97102",
        "rel": "self",
        "type": "GET",
        "title": "μ μ € μ±„ν…λ°© ID μƒμ„±"
      },
      {
        "href": "/mongo/offices/users/shaa97102/documents/614a123456789b0d323e456f",
        "rel": "/users/shaa97102/documents/614a123456789b0d323e456f",
        "type": "GET",
        "title": "μ μ € μ±„ν… λ¶λ¬μ¤κΈ°"
      }
    ]
  }
  ```

### μ¤λ¥ μ‘λ‹µ
- **μ¤λ¥ μ‘λ‹µ μμ‹**: 
  ```json
  {
    "status": "error",
    "detail": "μΈμ¦ μ½”λ“κ°€ μΌμΉν•μ§€ μ•μµλ‹λ‹¤.",
    "code": "invalid_verification_code"
  }
  ```